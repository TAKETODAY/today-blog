description = "today-blog API"

apply plugin: "java"
apply plugin: "application"
apply plugin: 'cn.taketoday.application'
//apply plugin: 'cn.taketoday.application.aot'
apply plugin: 'io.spring.dependency-management'
//apply plugin: 'org.graalvm.buildtools.native'

sourceCompatibility = JavaVersion.VERSION_17
targetCompatibility = JavaVersion.VERSION_17

dependencies {

  implementation 'cn.taketoday:ip2region-java:1.0-SNAPSHOT'
  implementation 'cn.taketoday:today-starter-netty'
  implementation 'cn.taketoday:today-starter-json'
  implementation 'cn.taketoday:today-starter-validation'
  implementation 'cn.taketoday:today-mybatis'
  implementation 'cn.taketoday:today-starter-jdbc'
  implementation 'cn.taketoday:today-starter-freemarker'
  implementation 'org.kohsuke:github-api:1.301'
  implementation 'eu.bitwalker:UserAgentUtils:1.21'
  implementation 'mysql:mysql-connector-java'
  implementation 'com.aliyun.oss:aliyun-sdk-oss:3.16.0'

  compileOnly 'org.projectlombok:lombok'
  annotationProcessor 'org.projectlombok:lombok:1.18.28'

  implementation 'ch.qos.logback:logback-classic'
  implementation 'jakarta.mail:jakarta.mail-api'
  implementation 'jakarta.activation:jakarta.activation-api'
  implementation 'com.sun.mail:jakarta.mail'
  implementation 'com.github.ben-manes.caffeine:caffeine'
  implementation 'io.prometheus:simpleclient'
  implementation 'io.prometheus:simpleclient_common'
  implementation 'io.prometheus:simpleclient_logback'

  annotationProcessor("cn.taketoday:infra-configuration-processor")
  annotationProcessor("cn.taketoday:infra-annotation-config-processor")

  testImplementation 'cn.taketoday:today-starter-test'
  testImplementation 'io.projectreactor:reactor-test'
  testImplementation 'org.apache.tomcat.embed:tomcat-embed-core'

  testImplementation("org.junit.jupiter:junit-jupiter-api")
  testImplementation("org.junit.jupiter:junit-jupiter-params")
  testImplementation("org.junit.platform:junit-platform-suite-api")
  testImplementation("org.mockito:mockito-core")
  testImplementation("org.mockito:mockito-junit-jupiter")
  testImplementation("junit:junit")
  testImplementation("org.assertj:assertj-core")
  testImplementation 'org.projectlombok:lombok'
  testAnnotationProcessor("org.projectlombok:lombok:1.18.28")

  // Pull in the latest JUnit 5 Launcher API to ensure proper support in IDEs.
  testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine")
  testRuntimeOnly("org.junit.platform:junit-platform-launcher")
  testRuntimeOnly("org.junit.platform:junit-platform-suite-engine")

}

jar {
  manifest.attributes["Implementation-Version"] = project.version
}


compileJava {
  options.encoding = 'UTF-8'
  options.compilerArgs << '-parameters'

}

application {
  mainClass = 'cn.taketoday.blog.BlogApplication'
}

infraBuildImage {
//  pullPolicy = "IF_NOT_PRESENT"
  applicationDirectory = "/application"
  network = "host"
//  createdDate = Instant.now().toString()
}
